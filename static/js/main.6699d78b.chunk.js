(this.webpackJsonprxjs_react_chat=this.webpackJsonprxjs_react_chat||[]).push([[0],{25:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(0),r=n.n(s),a=n(17),i=n.n(a),o=(n(25),n(5)),j=n(8),u=n(2),b=n(6),l=n(19),d=new(n(34).a),O={data:[],newDataCount:0},x=O,m={init:function(){return d.next(x)},subscribe:function(e){return d.subscribe(e)},sendMessage:function(e){x=Object(o.a)(Object(o.a)({},x),{},{data:[].concat(Object(l.a)(x.data),[e]),newDataCount:x.newDataCount+1}),d.next(x)},clearChat:function(){x=O,d.next(x)},initialState:O},p=function(e){var t=e.message,n=t.person,s=t.text;return Object(c.jsxs)("div",{children:[console.log("Message item rendered: "+s),Object(c.jsx)("p",{className:n,children:s}),Object(c.jsx)("div",{className:"clear"})]})},h=r.a.memo(p),f=function(e){var t=e.type,n=Object(s.useState)(m.initialState),r=Object(b.a)(n,2),a=r[0],i=r[1];return Object(s.useLayoutEffect)((function(){var e=m.subscribe(i);return m.init(),function(){return e.unsubscribe()}}),[]),Object(c.jsxs)("div",{className:"chat-box",children:[console.log(t+" chat-box rendered"),a.data.map((function(e,t){return Object(c.jsx)(h,{message:e},e.text+t)}))]})},g=r.a.memo(f),v=function(e){var t=e.type,n=Object(s.useState)(m.initialState),r=Object(b.a)(n,2)[1],a=Object(s.useRef)(Object(c.jsx)("form",{}));Object(s.useLayoutEffect)((function(){var e=m.subscribe(r);return m.init(),function(){return e.unsubscribe()}}),[]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("form",{ref:a,id:"messageForm",onSubmit:function(e){var n;e.preventDefault();var c={person:String(t),text:e.target.elements.messageInput.value.trim()};m.sendMessage(c),null===(n=a.current)||void 0===n||n.reset()},children:[Object(c.jsx)("input",{type:"text",id:"messageInput",name:"messageInput",placeholder:"type here...",required:!0}),Object(c.jsx)("button",{type:"submit",children:"Send"})," ",Object(c.jsx)("br",{})]}),Object(c.jsx)("button",{className:"clear-button",onClick:m.clearChat,children:"Clear Chat"})]})},y=r.a.memo(v),C=function(e){var t=e.type;return Object(c.jsxs)("div",{className:"container",children:[console.log(t+" Person rendered"),Object(c.jsx)("h2",{children:"Messages:"}),Object(c.jsx)(g,{type:t}),Object(c.jsx)(y,{type:t})]})},S=r.a.memo(C),w=function(e){var t=e.children,n=e.location,s=e.type;return n===s?Object(c.jsx)(c.Fragment,{children:t}):Object(c.jsx)(j.b,{to:"/".concat(s),children:t})},N=r.a.memo(w),F=function(){var e=Object(s.useState)(m.initialState),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(u.f)().pathname.split("/")[1];Object(s.useEffect)((function(){m.subscribe(r),m.init()}),[]);var i=n.newDataCount>0&&Object(c.jsx)("span",{className:"notify",children:n.newDataCount});return Object(c.jsxs)("div",{className:"switcher-div",children:[Object(c.jsx)(N,{location:a,type:"first-person",children:Object(c.jsxs)("button",{className:"switcher",children:["Person1","first-person"!==a&&a.length>1&&i]})}),Object(c.jsx)(N,{location:a,type:"second-person",children:Object(c.jsxs)("button",{className:"switcher",children:["Person2","second-person"!==a&&i]})})]})},D=r.a.memo(F),I=(n(31),"first-person"),M=function(){return Object(c.jsx)(j.a,{children:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(D,{}),Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{path:"/",component:function(e){return Object(c.jsx)(S,Object(o.a)({type:I},e))},exact:!0}),Object(c.jsx)(u.a,{path:"/first-person",component:function(e){return Object(c.jsx)(S,Object(o.a)({type:I},e))},exact:!0}),Object(c.jsx)(u.a,{path:"/second-person",component:function(e){return Object(c.jsx)(S,Object(o.a)({type:"second-person"},e))},exact:!0})]})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root")),P(console.log)}},[[32,1,2]]]);
//# sourceMappingURL=main.6699d78b.chunk.js.map